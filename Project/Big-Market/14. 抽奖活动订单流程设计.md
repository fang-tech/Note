

# SKU

> stock keeping unit : 库存量单位, 代表的是活动商品的唯一标识

- SKU的作用 
    - SKU中有整个活动配置的聚合
        - sku
        - 活动ID
        - 次数编号
        - 库存剩余
        - 库存总量
        - 创建时间
        - 更新时间
    - 通过这个SKU, 我们能查到这个活动的所有信息
- 同时一个SKU就是一个商品, 这些商品能共享一个活动, 这个表主要是用来解耦商品和活动
- 因为我们会出现一个多个商品共享一个活动的情况, 它们共享一套配置, 比如说, 用户通过签到和充值都能获得同一个活动的奖品, 这个时候我们就能灵活地配置

# 幂等性

> 在系统设计中的含义是 : 对同一操作执行一次或者多次, 其结果应该是一样的. 通俗地说, 多次调用对系统产生的影响是一样的, 即对资源的作用是一样的

- 拿数据库举例, mysql就实现了幂等性
    - SELECT 语句不涉及对数据的变动, 天生就具有幂等性
    - UPDATE, DELETE等语句多次执行的结果是一样的, 具备幂等性, (这里指的是绝对值删除, 也就是 id = x这种)
    - 与之相对的, 使用相对值进行UPDATE, DELETE, 就不具备幂等性, 我们多次运行的结果是不一致的

- 在这里我们SKU的设计中, outBusinessNo字段的是业务的单号, 通过这个业务单号, 我们来实现幂等性, 即使我同一个请求发送多遍, 系统也只会处理一次

# 业务流程

