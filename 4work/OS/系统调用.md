# OS

## 什么是系统调用 ?

> 操作系统为了用户态的程序能过够调用操作系统提供的内核态级别的子功能而创建的接口

- 凡是与系统态级别的资源有关的操作, 都必须通过系统调用方式向操作系统提出服务请求
    - 文件管理
    - 进程控制
    - 内存管理

## 系统调用的分类 ?

- 设备管理: 完成设备 (输入输出设备和外部存储设备等) 的请求或释放, 以及设备启动等功能
- 文件管理: 完成对文件的CRUD
- 进程管理: 进程的创建, 撤销, 阻塞, 唤醒, 进程间的通信等功能
- 内存管理: 完成内存的分配, 回收以及获取作业占用内存区大小及地址等功能

## 系统调用的过程了解吗 ?

1. 用户态的程序发起系统调用, 因为系统调用中涉及到一些特权指令 (只能由操作系统内核态才能运行的指令), 用户态程序权限不足, 因此会中断执行, 也就是Trap (Trap是一种中断)
2. 中断发生以后, 当前CPU执行的程序会中断, 跳转到中断处理程序. 内核程序开始执行, 也就是开始处理系统调用
3. 当系统调用处理完毕以后, 操作系统再调用特权指令切换回用户态 (iret, sysret eret), 恢复用户态的上下文, 继续执行用户态程序