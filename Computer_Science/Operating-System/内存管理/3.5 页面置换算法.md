# 页面置换算法

## 页面置换 swap

在发生缺页中断以后, 如果这个时候物理内存已经申请满了, 我们就会触发页面置换, 我们将不常用的页置换到硬盘中, 从而空出申请需要的内存, 这里有个问题是我们怎么选出来不常用的页面呢?

## 页面置换算法

这就是页面置换算法做得事

### 最佳页面置换算法

我们计算出来现在被使用的物理页中, 需要经过最长时间才会迎来下一次使用的页, 然后将这个页置换出去

这个算法是一个理想的算法, 因为我们是无法得知某个页下一次使用的时间

这个算法也是效率最高的算法, 所以常用来衡量页面置换算法, 页面置换算法离最佳页面置换算法越近, 效率越高

### FIFO

先进先出页面置换算法, 维护一个全局队列, 最先被被使用的页, 最先被淘汰

### LRU

最近最久未使用置换算法

使用LRU维护全局链表, 每次淘汰最久不被使用的页

但是这个实现方法存在着每次访问页都需要更新链表, 成本高, 所以同样不常被作为页面置换算法来实现

### CLOCK

时钟页面置换算法就是用来解决上面LRU的问题的

我们维护一个所有物理页的环形队列, 让一个指针开始的时候指向某个页面, 然后在需要页面置换的时候, 

沿环形队列扫描, 如果这个页面的页表项的访问位是0, 则将这个页面淘汰, 如果是1则置0, 扫描直到碰到0, 然后将它淘汰

### LFU

最不常用置换算法

淘汰使用次数最少的页面, 但是这里需要给每个页面维护一个计数器, 硬件开销成本大

同时这个算法没有考虑到时间, 如果某个页面在很久以前被使用了非常多次, 就会一直留滞在内存中