# 线程同步

## 什么是线程同步

> 现在让我们抛掉任何形式化的定义, 现在有一个乐团, 将其中的每个人就是一个线程, 演奏音乐就是他的功能, 现在我们要怎么样才能正确地演奏一首音乐? 

- 很显然的一件事是 : 这个时候互斥锁帮不上什么忙, 这是另一个需求, 我们需要实现的是一个并行的运行, 同时是一个有序的并行 : 我们希望各个线程在恰当的时候, 也就是指挥需要它的时候, 才执行功能

- 我们将模型抽象出来 : 这会变成, 我们有线程T_1, T_2, 假设我们需要他们在Time时刻共同进行一个行为, 那么现在我们就会有几个显然的事实
    - 先到的先等 : 先执行完了自己的任务的线程, 需要等待到Time时刻并且另一个线程同样满足条件, 这个时候才有下一步
    - 我们可以将线程的任务执行和状态变迁, 简单地看成由某个确定的状态, 经过了一系列的行为以后, 又收束到了另一个确定的简单的状态(在Time时刻等待这个状态)

## 一种简单的实现方式 : 自旋

> 我们首先创建一个指挥家的角色, 用于协调和告诉各个线程是否该进行下一步

- 创建 `wait_next_beat` 函数, 不断地自旋以等待指挥家发出可以发出声音的命令

# 生产者-消费者问题

## 