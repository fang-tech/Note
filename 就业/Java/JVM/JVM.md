# JVM, JDK, JRE之间的关系

## JDK

> Java Development Kit : Java开发工具包

- 里面包含了JRE, 有开发工具包括编译工具(javac.exe), 打包工具(jar.exe)等工具

## JRE

> Java Runtime Environment : Java运行环境

- 是JDK的子集, JRE提供了库, Java虚拟机, 和其他组件

## JVM

> Java Virtual Machine : Java虚拟机

- 一个虚拟出来的计算机, 负责把Java程序生成的字节码文件, 解释成具体系统平台上的机器指令

## Client模式, Server模式

> JVM的不同启动模式

- Client模式, 启动速度更快, 用于运行GUI交互程序A
    - JIT的编译阈值较高, 倾向于解释运行
    - 编译优化的程度更低, 更适合于注重启动性能而非长期运行性能
- Server模式, 启动速度慢, 但是运行起来更快. 用于运行服务器后台程序
    - JIT的编译阈值更低, 倾向于编译运行, 
    - 编译优化的程度更高, 能执行更全面的优化, 比如方法内联, 循环展开, 逃逸分析等
    - 因为执行了更多的编译优化, 长期运行的性能是更好的

## JVM结构和执行器

- Class Loader : 类装载器是用于记载类文件的一个子系统, 其主要功能是 
    - loading(加载), linking(链接), initialization(初始化)
- JVM MEmory Areas 
    - 方法区
    - 堆区
    - 栈区
    - 程序计数器
- Interpreter (解释器) : 通过预定义的JVM指令到机器指令映射, JVM解释器可以将每个字节码转化为相应的本地指令, 直接执行字节码, 不做任何优化
- JIT Compiler(即时编译器) : JIT执行一段代码而不是一句代码, 有了足够的上下文, 我们就有空间优化这段代码到机器码, 通过JIT我们能获取优化后的机器码 (默认开启)

# 类加载

## 本章要点

- JVM类字节码 : 源代码通过编译器编译成字节码, 再通过类加载子系统进行加载到JVM中运行
- JVM字节码增强技术 : 对现有字节码进行修改或者动态生成字节码文件的技术, 也是实现代理模式对等的核心机制
- JVM类加载机制 : 详解Java类的加载过程
